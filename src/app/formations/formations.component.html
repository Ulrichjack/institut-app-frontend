<section class="py-5 bg-light-beauty">
  <div class="container">
    <!-- En-tête de la page -->
    <div class="row justify-content-center mb-5">
      <div class="col-lg-10 text-center">
        <p class="text-beauty-primary mb-3 fs-6 fw-medium">Découvrez notre catalogue complet</p>
        <h1 class="display-4 fw-bold text-dark mb-4">
          Toutes nos <span class="text-beauty-primary">Formations</span>
        </h1>
        <div class="mx-auto mb-4" style="width: 80px; height: 4px; background: linear-gradient(45deg, #e91e63, #9c27b0);"></div>
        <p class="lead text-muted px-3">
          Explorez notre gamme complète de formations professionnelles en esthétique,
          conçues pour vous accompagner vers l'excellence.
        </p>
      </div>
    </div>

  

    <!-- États de chargement -->
    <div *ngIf="isLoading" class="text-center py-5">
      <div class="spinner-border text-beauty-primary mb-3" role="status" style="width: 3rem; height: 3rem;">
        <span class="visually-hidden">Chargement...</span>
      </div>
      <h4 class="text-muted">Chargement des formations...</h4>
      <p class="text-muted">Patientez quelques instants</p>
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger text-center py-4" role="alert">
      <i class="fas fa-exclamation-triangle fs-2 mb-3"></i>
      <h4>Oups! Une erreur s'est produite</h4>
      <p class="mb-3">{{ errorMessage }}</p>
      <button class="btn btn-outline-danger" (click)="loadFormations()">
        <i class="fas fa-redo me-2"></i>Réessayer
      </button>
    </div>

    <div *ngIf="!isLoading && formations.length === 0 && !errorMessage" class="alert alert-info text-center py-5" role="alert">
      <i class="fas fa-search fs-2 mb-3"></i>
      <h4>Aucune formation trouvée</h4>
      <p class="mb-0">Revenez bientôt pour découvrir nos nouveaux programmes!</p>
    </div>

    <!-- Grille des formations -->
    <div class="row g-4" *ngIf="formations.length > 0">
      <div class="col-lg-6" *ngFor="let formation of formations">
        <div class="card formation-card-large h-100 border-0 shadow-lg overflow-hidden">
          <div class="row g-0 h-100">
            <div class="col-md-5">
              <div class="position-relative h-100" style="min-height: 300px;">
                <img [src]="formation.photoPrincipale"
                     [alt]="formation.nom"
                     class="img-fluid h-100 w-100 object-fit-cover">
                <div class="overlay-gradient"></div>
                <div class="position-absolute top-0 start-0 m-3">
                  <div class="d-flex align-items-center bg-white bg-opacity-90 rounded-pill px-3 py-1">
                    <i class="fas fa-info-circle text-beauty-primary me-2"></i>
                    <small class="text-dark fw-medium">Se renseigner:</small>
                  </div>
                </div>
                <div class="position-absolute bottom-0 start-0 m-3">
                  <span class="badge bg-beauty-primary rounded-pill px-3 py-2 fs-6">
                    {{ formation.categorie }}
                  </span>
                </div>
              </div>
            </div>
            <div class="col-md-7">
              <div class="card-body d-flex flex-column h-100 p-4">
                <div class="mb-3">
                  <h4 class="card-title fw-bold text-dark mb-3">{{ formation.nom }}</h4>
                  <p class="card-text text-muted flex-grow-1 mb-4">{{ formation.description }}</p>
                </div>

                <div class="mt-auto">
                  <!-- Prix et étoiles -->
                  <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                      <span class="fw-bold fs-3 text-success">{{ formation.prix | currency:'XOF':'symbol':'1.0-0' }}</span>
                      <br>
                      <small class="text-muted">Prix de la formation</small>
                    </div>
                    <div class="text-end">
                      <div class="rating-stars mb-1">
                        <i class="fas fa-star text-warning" *ngFor="let star of [1,2,3,4,5]"></i>
                      </div>
                      <small class="text-muted">Formation populaire</small>
                    </div>
                  </div>

                  <!-- Bouton d'action -->
                  <div class="d-grid">
                    <button (click)="voirDetails(formation.slug)"
                            class="btn btn-beauty-primary btn-lg fw-semibold py-3">
                      <i class="fas fa-plus-circle me-2"></i>
                      EN SAVOIR +
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination améliorée -->
    <nav *ngIf="totalPages > 1" aria-label="Navigation des pages" class="mt-5">
      <div class="d-flex justify-content-center align-items-center flex-wrap gap-2">
        <!-- Bouton précédent -->
        <button class="btn btn-outline-beauty-primary"
                [disabled]="currentPage === 0"
                (click)="onPageChange(currentPage - 1)"
                aria-label="Page précédente">
          <i class="fas fa-chevron-left"></i>
        </button>

        <!-- Pages -->
        <div class="d-flex gap-1">
          <button *ngFor="let page of pages"
                  class="btn"
                  [class]="page === currentPage ? 'btn-beauty-primary' : 'btn-outline-beauty-primary'"
                  (click)="onPageChange(page)"
                  [attr.aria-label]="'Page ' + (page + 1)">
            {{ page + 1 }}
          </button>
        </div>

        <!-- Bouton suivant -->
        <button class="btn btn-outline-beauty-primary"
                [disabled]="currentPage === totalPages - 1"
                (click)="onPageChange(currentPage + 1)"
                aria-label="Page suivante">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>

      <!-- Informations de pagination -->
      <div class="text-center mt-3">
        <small class="text-muted">
          Page {{ currentPage + 1 }} sur {{ totalPages }}
          ({{ totalElements }} formations au total)
        </small>
      </div>
    </nav>

    <!-- Call to action final -->
    <div class="text-center mt-5 pt-5">
      <div class="bg-beauty-gradient rounded-4 p-5 text-white">
        <h3 class="fw-bold mb-3">Prêt(e) à commencer votre formation ?</h3>
        <p class="mb-4">Contactez-nous dès aujourd'hui pour plus d'informations</p>
        <div class="d-flex justify-content-center gap-3 flex-wrap">
          <a href="tel:+237000000000" class="btn btn-light btn-lg">
            <i class="fas fa-phone me-2"></i>Appelez-nous
          </a>
          <a href="mailto:contact@beaute-excellence.com" class="btn btn-outline-light btn-lg">
            <i class="fas fa-envelope me-2"></i>Écrivez-nous
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
