<section class="hero-section position-relative overflow-hidden" #heroSection>
  <!-- Décorations background avec animation -->
  <div class="bg-icon top-right animate-float">
    <i class="fas fa-spa"></i>
  </div>
  <div class="bg-icon bottom-left animate-float-reverse">
    <i class="fas fa-leaf"></i>
  </div>

  <div class="container position-relative">
    <!-- Hero principal avec animations -->
    <div class="hero-content text-center animate-on-scroll">
      <!-- Badge d'intro -->
      <div class="hero-badge d-inline-flex align-items-center">
        <span class="badge-text">Vous souhaitez exceller dans le domaine de la beauté ?</span>
      </div>

      <!-- Titre principal -->
      <h1 class="hero-title">
        Rejoignez la famille
        <span class="highlighted-title">
          <br>IBE
          <span class="title-underline animate-underline"></span>
        </span>
      </h1>

      <p class="hero-desc">
        Votre centre de formation en Beauté existe depuis <strong class="text-beauty-primary">2020</strong>.<br>
        Formations pointues <strong> alliant pratique et théorie</strong>.<br>
        Accessible dès <strong>15 ans et plus, niveau CEP</strong>.
      </p>

      <!-- Citation mise en valeur -->
      <div class="hero-quote">
        <i class="fas fa-quote-left quote-icon"></i>
        <span>
          Si vous souhaitez devenir un(e) expert(e) avec une formation courte et de qualité, nous sommes
          <span class="text-beauty-primary fw-bold">"le meilleur accompagnement pour gagner du temps"</span>.
        </span>
        <i class="fas fa-quote-right quote-icon-secondary"></i>
      </div>
    </div>

    <!-- Avantages avec animations décalées -->
    <div class="row hero-features">
      <div class="col-lg-4 animate-on-scroll" [style.animation-delay]="'0.1s'">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-clock"></i>
          </div>
          <h5>Formations Flexibles &amp; Adaptées</h5>
          <p>Programmes conçus pour s'adapter à votre rythme et vos objectifs professionnels, avec horaires modulables.</p>
        </div>
      </div>
      <div class="col-lg-4 animate-on-scroll" [style.animation-delay]="'0.2s'">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-graduation-cap"></i>
          </div>
          <h5>Théorie + Pratique d'excellence</h5>
          <p>Un équilibre parfait entre connaissances théoriques solides et pratiques professionnelles intensives.</p>
        </div>
      </div>
      <div class="col-lg-4 animate-on-scroll" [style.animation-delay]="'0.3s'">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-trophy"></i>
          </div>
          <h5>Opportunités Prometteuses</h5>
          <p>Ouvrez-vous les portes d'une carrière florissante dans le secteur de la beauté en pleine expansion.</p>
        </div>
      </div>
    </div>

    <!-- Separator avec animation -->
    <div class="hero-separator animate-on-scroll">
      <span class="sep-icon animate-pulse"><i class="fas fa-star"></i></span>
      <span class="sep-line"></span>
      <span class="sep-icon animate-pulse"><i class="fas fa-heart"></i></span>
      <span class="sep-line"></span>
      <span class="sep-icon animate-pulse"><i class="fas fa-star"></i></span>
    </div>
  </div>
</section>

<section class="formations-section" #formationsSection>
  <div class="container">
    <div class="section-title text-center mb-5 animate-on-scroll">
      <h2>NOS FORMATIONS EN <span class="highlight">ESTHÉTIQUE</span></h2>
      <div class="section-subtitle">
        <p>Découvrez nos programmes conçus pour assurer votre réussite professionnelle</p>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state text-center">
      <div class="spinner-container">
        <div class="beauty-spinner"></div>
        <p class="loading-text">Chargement des formations...</p>
      </div>
    </div>

    <!-- Error State -->
    <div *ngIf="errorMessage && !isLoading" class="error-state text-center">
      <div class="error-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <p class="error-text">{{ errorMessage }}</p>
      <button class="btn btn-beauty-primary" (click)="loadLatestFormations()">
        <i class="fas fa-redo-alt me-2"></i>Réessayer
      </button>
    </div>

    <!-- Formations Grid -->
    <div class="row justify-content-center formations-list" *ngIf="!isLoading && !errorMessage">
      <div class="col-lg-4 col-md-6 formation-card animate-on-scroll"
           *ngFor="let formation of formations; let i = index"
           [style.animation-delay]="getAnimationDelay(i)">
        <div class="card-inner">
          <div class="img-wrap position-relative">
            <img [src]="getCloudinaryPreviewUrl(formation.photoPrincipale)"
                 [alt]="formation.nom"
                 class="formation-img"
                 loading="lazy" />

            <!-- Overlay d'interaction -->
            <div class="img-overlay">
              <button class="btn btn-outline-light btn-sm" (click)="voirDetails(formation.slug)">
                <i class="fas fa-eye me-2"></i>Aperçu
              </button>
            </div>

            <!-- Badge promo sur image -->
            <span *ngIf="formation.promoActive" class="promo-badge animate-bounce">
              <i class="fas fa-bolt"></i> -{{ formation.pourcentageReduction }}%
            </span>

            <!-- Badge certificat sur image -->
            <span *ngIf="formation.certificatDelivre" class="cert-badge">
              <i class="fas fa-certificate"></i> Certificat
            </span>
          </div>

          <div class="formation-card-body">
            <h3 class="formation-title mb-2">{{ formation.nom }}</h3>
            <div class="desc-short mb-2">{{ formation.description }}</div>

            <!-- Social Proof amélioré -->
            <div class="social-proof mb-2" *ngIf="formation.messageSocialProof || formation.placesRestantes">
              <div class="proof-item" *ngIf="formation.messageSocialProof">
                <i class="fas fa-users text-success"></i>
                <span>{{ formation.messageSocialProof }}</span>
              </div>
              <div class="proof-item places-restantes" *ngIf="formation.placesRestantes">
                <i class="fas fa-hourglass-half text-warning"></i>
                <span class="text-warning fw-bold">{{ formation.placesRestantes }} places restantes</span>
              </div>
            </div>

            <!-- Taux de remplissage amélioré -->
            <div *ngIf="formation.tauxRemplissage !== undefined" class="progress-section mb-3">
              <div class="progress-info d-flex justify-content-between align-items-center mb-1">
                <small class="text-muted">Progression des inscriptions</small>
                <small class="text-beauty-primary fw-bold">{{ formation.tauxRemplissage | number:'1.0-0' }}%</small>
              </div>
              <div class="progress">
                <div class="progress-bar animate-progress"
                  [style.width.%]="formation.tauxRemplissage"
                  [attr.aria-valuenow]="formation.tauxRemplissage"
                  [attr.aria-valuemin]="0"
                  [attr.aria-valuemax]="100"></div>
              </div>
            </div>

            <button (click)="voirDetails(formation.slug)" class="btn-en-savoir">
              <span>En savoir plus</span>
              <i class="fas fa-arrow-right ms-2 arrow-icon"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Section "Plus de cours / Autres formations" -->
    <div class="more-courses-section text-center mt-5 animate-on-scroll" *ngIf="formations.length > 0">
      <div class="more-courses-content">
        <div class="icon-container mb-3">
          <i class="fas fa-graduation-cap"></i>
        </div>
        <h4 class="fw-bold mb-3">Vous souhaitez découvrir d'autres formations ?</h4>
        <p class="text-muted mb-4">Explorez notre catalogue complet et trouvez la formation qui vous correspond parfaitement !</p>
        <a routerLink="/formations" class="btn btn-beauty-primary btn-lg px-5">
          <i class="fas fa-layer-group me-2"></i>
          Voir toutes les formations
        </a>
      </div>
    </div>
  </div>
</section>
